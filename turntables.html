<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="generated-icon.png">
    <meta name="description" content="Kirk Radio DJ - Professional DJ Software for mixing and live performances">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' https: 'unsafe-inline' 'unsafe-eval'; style-src 'self' https: 'unsafe-inline';">
    <title>Kirk Radio DJ - Professional DJ Software</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tone@14.7.77/build/Tone.min.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="content-overlay"></div>
    <div class="menu">
        <button onclick="saveMix()" class="menu-button">Save Mix</button>
        <button onclick="loadTrack()" class="menu-button">Load Track</button>
        <button onclick="openLibraryFolder()" class="menu-button">Open Library Folder</button>
        <button onclick="createPlaylist()" class="menu-button">New Playlist</button>
    </div>

    <div class="flex h-screen">
        <!-- Left Sidebar - Track Library -->
        <div class="w-[420px] bg-[#1a1a1a] border-r border-[#333] flex flex-col">
            <!-- Track Library Header -->
            <div class="p-6 border-b border-[#333]">
                <h2 class="text-xl font-medium mb-4">Track Library</h2>
                <div class="relative mb-4">
                    <input type="search" 
                           id="searchInput"
                           placeholder="Search tracks..." 
                           autocomplete="off"
                           autocorrect="off"
                           autocapitalize="off"
                           spellcheck="false"
                           class="w-full bg-[#222] border border-[#333] rounded-lg px-4 py-3 pl-10 pr-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-blue-600 transition-all duration-200">
                    <i class="fas fa-search absolute left-3 top-3.5 text-blue-500"></i>
                </div>
                
                <!-- Library Controls -->
                <div class="flex flex-wrap gap-2 mb-4">
                    <button class="dj-button-small tooltip">
                        <i class="fas fa-plus mr-1"></i> New Playlist
                        <span class="tooltip-text">Create a new playlist</span>
                    </button>
                    <button class="dj-button-small tooltip">
                        <i class="fas fa-folder-open mr-1"></i> Import
                        <span class="tooltip-text">Import music</span>
                    </button>
                    <button class="dj-button-small tooltip">
                        <i class="fas fa-sync-alt mr-1"></i> Refresh
                        <span class="tooltip-text">Refresh library</span>
                    </button>
                    <button class="dj-button-small tooltip">
                        <i class="fas fa-sort-alpha-down mr-1"></i> Sort
                        <span class="tooltip-text">Sort tracks</span>
                    </button>
                </div>
            </div>
            
            <!-- Library Sections -->
            <div class="border-b border-[#333]">
                <div class="tabs flex">
                    <button class="tab-button active px-4 py-3 flex-1 text-center">
                        <i class="fas fa-music mr-2"></i> Tracks
                    </button>
                    <button class="tab-button px-4 py-3 flex-1 text-center">
                        <i class="fas fa-list mr-2"></i> Playlists
                    </button>
                    <button class="tab-button px-4 py-3 flex-1 text-center">
                        <i class="fas fa-heart mr-2"></i> Favorites
                    </button>
                </div>
            </div>
            
            <!-- Music Services -->
            <div class="p-4 border-b border-[#333] bg-[#1F1F1F]">
                <h3 class="text-sm font-medium mb-3 text-gray-400 uppercase">Music Services</h3>
                <div class="grid grid-cols-3 gap-2">
                    <button class="service-button p-2 bg-[#222] hover:bg-[#333] rounded text-center transition-colors">
                        <i class="fab fa-spotify text-green-500 text-xl"></i>
                        <div class="text-xs mt-1">Spotify</div>
                    </button>
                    <button class="service-button p-2 bg-[#222] hover:bg-[#333] rounded text-center transition-colors">
                        <i class="fab fa-soundcloud text-orange-500 text-xl"></i>
                        <div class="text-xs mt-1">SoundCloud</div>
                    </button>
                    <button class="service-button p-2 bg-[#222] hover:bg-[#333] rounded text-center transition-colors">
                        <i class="fas fa-podcast text-purple-500 text-xl"></i>
                        <div class="text-xs mt-1">Mixcloud</div>
                    </button>
                </div>
            </div>
            
            <!-- Track List - Increased Height -->
            <div class="flex-1 overflow-y-auto px-4 py-3 h-[calc(100vh-380px)]" id="trackList">
                <div class="track-list-header flex items-center text-xs text-gray-400 uppercase font-medium pb-2 mb-2 border-b border-[#333] sticky top-0 bg-[#1a1a1a] z-10 pr-2">
                    <div class="w-8 text-center">#</div>
                    <div class="flex-1">Title</div>
                    <div class="w-20 text-right">BPM</div>
                    <div class="w-20 text-right">Length</div>
                    <div class="w-8 text-right"><i class="fas fa-ellipsis-v"></i></div>
                </div>
                
                <!-- Sample Tracks (These will be populated dynamically) -->
                <div class="track-item flex items-center p-2 hover:bg-[#222] rounded cursor-pointer">
                    <div class="w-8 text-center text-gray-500">1</div>
                    <div class="flex-1">
                        <div class="text-sm font-medium">Track Title Example</div>
                        <div class="text-xs text-gray-500">Artist Name</div>
                    </div>
                    <div class="w-20 text-right text-sm">128</div>
                    <div class="w-20 text-right text-sm">3:45</div>
                    <div class="w-8 text-right">
                        <button class="text-gray-400 hover:text-white transition-colors">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>
                
                <!-- More sample tracks would be here, generated by the library.js script -->
            </div>
            
            <!-- Now Playing Preview -->
            <div class="p-4 border-t border-[#333] bg-[#1F1F1F] flex items-center">
                <div class="w-12 h-12 bg-[#333] rounded flex items-center justify-center mr-3">
                    <i class="fas fa-music text-xl text-gray-500"></i>
                </div>
                <div class="flex-1 overflow-hidden">
                    <div class="font-medium truncate" id="nowPlayingTitle">Not Playing</div>
                    <div class="text-xs text-gray-500 truncate" id="nowPlayingArtist">--</div>
                </div>
                <div class="ml-3">
                    <button class="p-2 rounded-full bg-[#333] hover:bg-[#444] transition-colors">
                        <i class="fas fa-play text-sm"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Main Content -->
        <div class="flex-1 flex flex-col bg-[#111]">
            <!-- Premium Banner (shows for free users) -->
            <div id="premiumBanner" class="bg-gradient-to-r from-purple-600 to-blue-600 p-3 flex justify-between items-center text-white border-b border-[#333] hidden">
                <div class="flex items-center">
                    <i class="fas fa-crown text-yellow-300 text-xl mr-2"></i>
                    <span>Unlock premium features: Advanced effects, higher quality recording, and more!</span>
                </div>
                <button onclick="premiumFeatures.showPricingModal()" class="bg-yellow-300 hover:bg-yellow-400 text-gray-900 py-1 px-4 rounded-full font-medium transition-colors">
                    Upgrade Now
                </button>
            </div>
            
            <!-- Top Toolbar -->
            <div class="bg-[#1a1a1a] border-b border-[#333] p-4">
                <div class="flex items-center justify-between">
                    <div class="flex space-x-4">
                        <button onclick=\"saveMix()\" class=\"dj-button tooltip\">
                            <i class=\"fas fa-save mr-2\"></i> Save Mix
                            <span class=\"tooltip-text\">Save the current mix session</span>
                        </button>
                        <button onclick=\"premiumFeatures.showPricingModal()\" class=\"dj-button premium-button tooltip\" style="position: relative;">
                            <i class=\"fas fa-crown text-yellow-300 mr-2\"></i> Go Premium
                            <span class=\"tooltip-text\">View premium features and pricing</span>
                        </button>
                        <button id="loadTrackBtn" onclick="loadTrack()" class="dj-button tooltip">
                            <i class="fas fa-file-audio mr-2"></i> Load Track
                            <span class="tooltip-text">Load an audio track from your device</span>
                        </button>
                        <div class="dropdown relative">
                            <button id="broadcastBtn" onclick="toggleBroadcastSettings()" class="dj-button tooltip">
                                <i class="fas fa-broadcast-tower mr-2"></i> Broadcast Settings
                                <span class="tooltip-text">Configure and start broadcasting</span>
                            </button>
                            <div id="broadcastSettings" class="dropdown-content">
                                <div class="p-4">
                                    <h3 class="font-medium mb-2">Broadcast Settings</h3>
                                    
                                    <div class="mb-4">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-sm font-medium">Broadcast Status</span>
                                            <span class="px-2 py-1 bg-gray-700 text-xs rounded">OFFLINE</span>
                                        </div>
                                        <div class="h-1 w-full bg-[#333] rounded overflow-hidden">
                                            <div class="bg-red-500 h-full" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="block text-sm mb-1">Broadcast Name</label>
                                        <input type="text" id="broadcastName" 
                                            placeholder="My Live DJ Set" 
                                            autocomplete="off"
                                            autocorrect="off"
                                            autocapitalize="off"
                                            spellcheck="false"
                                            class="w-full bg-[#222] border border-[#333] rounded px-3 py-2 text-white">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="block text-sm mb-1">Server Type</label>
                                        <select id="serverType" class="w-full bg-[#222] border border-[#333] rounded px-3 py-2 text-white">
                                            <option>Icecast</option>
                                            <option>SHOUTcast</option>
                                            <option>RTMP</option>
                                            <option>YouTube Live</option>
                                            <option>Twitch</option>
                                            <option>Facebook Live</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="block text-sm mb-1">Server URL</label>
                                        <input type="text" id="serverUrl" 
                                            placeholder="rtmp://live.example.com/app" 
                                            autocomplete="off"
                                            autocorrect="off"
                                            autocapitalize="off"
                                            spellcheck="false"
                                            class="w-full bg-[#222] border border-[#333] rounded px-3 py-2 text-white">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="block text-sm mb-1">Stream Key/Password</label>
                                        <div class="relative">
                                            <input type="password" id="streamKey" placeholder="••••••••••••••••" 
                                                class="w-full bg-[#222] border border-[#333] rounded px-3 py-2 pr-10 text-white">
                                            <button type="button" onclick="togglePasswordVisibility()" 
                                                class="absolute inset-y-0 right-0 px-3 flex items-center">
                                                <i class="fas fa-eye text-gray-500"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-3 mb-4">
                                        <div>
                                            <label class="block text-sm mb-1">Audio Format</label>
                                            <select id="audioFormat" class="w-full bg-[#222] border border-[#333] rounded px-3 py-2 text-white">
                                                <option>MP3</option>
                                                <option>AAC</option>
                                                <option>Opus</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm mb-1">Bitrate</label>
                                            <select id="bitrate" class="w-full bg-[#222] border border-[#333] rounded px-3 py-2 text-white">
                                                <option>128 kbps</option>
                                                <option>192 kbps</option>
                                                <option selected>256 kbps</option>
                                                <option>320 kbps</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="flex items-center">
                                            <input type="checkbox" id="recordBroadcast" class="mr-2">
                                            <span class="text-sm">Record broadcast locally</span>
                                        </label>
                                    </div>
                                    
                                    <div class="mt-4 flex gap-2">
                                        <button onclick="testConnection()" class="dj-button flex-1">
                                            <i class="fas fa-plug mr-2"></i> Test Connection
                                        </button>
                                        <button onclick="startBroadcast()" class="dj-button flex-1 bg-[#D42F00]">
                                            <i class="fas fa-broadcast-tower mr-2"></i> Start Broadcasting
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="dropdown relative">
                            <button id="settingsBtn" onclick="toggleAppSettings()" class="dj-button tooltip">
                                <i class="fas fa-cog mr-2"></i> Settings
                                <span class="tooltip-text">Configure application settings</span>
                            </button>
                            <div id="appSettings" class="dropdown-content">
                                <div class="p-4">
                                    <div id="subscriptionStatus" class="mb-4">
                                        <div class="p-3 bg-[#222] rounded mb-3">
                                            <div class="flex items-center justify-between mb-2">
                                                <span class="font-medium">Subscription Status</span>
                                                <span id="currentPlan" class="px-2 py-1 bg-gray-700 text-xs rounded">FREE</span>
                                            </div>
                                            <div id="premiumExpiryInfo" class="text-sm text-gray-400 hidden">
                                                Premium expires: <span id="premiumExpiry">--</span>
                                            </div>
                                            <div class="mt-3">
                                                <button id="managePremiumBtn" onclick="premiumFeatures.showPricingModal()" class="dj-button w-full">
                                                    <i class="fas fa-crown text-yellow-300 mr-2"></i> Upgrade to Premium
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <h3 class="font-medium mb-2">Audio Settings</h3>
                                    <div class="mb-2">
                                        <label class="block text-sm mb-1">Audio Output</label>
                                        <select id="audioOutputSelector" class="w-full bg-[#222] border border-[#333] rounded px-3 py-2 text-white">
                                            <!-- Will be populated with available devices -->
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <label class="block text-sm mb-1">Latency Buffer</label>
                                        <select class="w-full bg-[#222] border border-[#333] rounded px-3 py-2 text-white">
                                            <option>128 samples</option>
                                            <option>256 samples</option>
                                            <option>512 samples</option>
                                            <option>1024 samples</option>
                                        </select>
                                    </div>
                                    <h3 class="font-medium mb-2 mt-4">Interface Settings</h3>
                                    <div class="mb-2">
                                        <label class="flex items-center">
                                            <input type="checkbox" class="mr-2">
                                            <span>Show waveforms</span>
                                        </label>
                                    </div>
                                    <div class="mb-2">
                                        <label class="flex items-center">
                                            <input type="checkbox" class="mr-2">
                                            <span>Show beat grid</span>
                                        </label>
                                    </div>
                                    <div class="mb-2">
                                        <label class="flex items-center">
                                            <input type="checkbox" class="mr-2" checked>
                                            <span>Enable 3D graphics</span>
                                        </label>
                                    </div>
                                    <div class="mt-4">
                                        <button onclick="saveSettings()" class="dj-button w-full">
                                            <i class="fas fa-save mr-2"></i> Save Settings
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center space-x-6">
                        <!-- Premium Badge (shows for premium users) -->
                        <div id="premiumBadge" class="hidden">
                            <span class="bg-gradient-to-r from-yellow-400 to-yellow-600 text-black px-3 py-1 rounded-full font-medium text-xs flex items-center">
                                <i class="fas fa-crown mr-1"></i> PREMIUM
                            </span>
                        </div>
                        <div class="flex items-center">
                            <span class="control-label mr-2">Master Tempo:</span>
                            <input type="range" min="60" max="200" value="128" class="slider w-32"
                                   oninput="updateMasterTempo(this.value)">
                            <span class="text-white ml-2" id="tempoValue">128 BPM</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-volume-up text-white mr-2" title="Master Volume"></i>
                            <input type="range" min="0" max="100" value="100" class="slider w-24"
                                   oninput="updateMasterVolume(this.value)" title="Master Volume Control">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Decks -->
            <div class="flex-1 p-6 space-y-6">
                <div class="grid grid-cols-2 gap-6">
                    <!-- Deck 1 -->
                    <div class="deck p-6">
                        <div class="flex justify-between mb-4">
                            <h2 class="text-xl font-medium">Deck 1</h2>
                            <div class="flex space-x-2">
                                <button onclick="toggleSync(0)" class="dj-button tooltip" id="syncBtn1">
                                    <i class="fas fa-sync"></i>
                                    <span class="tooltip-text">Sync Tempo with Master</span>
                                </button>
                                <button onclick="toggleKeyLock(0)" class="dj-button tooltip" id="keyLockBtn1">
                                    <i class="fas fa-key"></i>
                                    <span class="tooltip-text">Lock Key When Changing Tempo</span>
                                </button>
                                <button onclick="toggleLoop(0)" class="dj-button tooltip" id="loopBtn1">
                                    <i class="fas fa-redo"></i>
                                    <span class="tooltip-text">Loop Current Section</span>
                                </button>
                            </div>
                        </div>
                        <div class="track-info p-2 mb-4">
                            <div id="deck1Title" class="font-medium truncate">No track loaded</div>
                            <div id="deck1Artist" class="text-sm text-gray-400 truncate">--</div>
                            <div class="flex justify-between items-center mt-2 text-xs text-gray-500">
                                <span id="deck1CurrentTime">00:00</span>
                                <div class="progress-bar flex-1 mx-2">
                                    <div id="deck1Progress" class="progress-bar-fill" style="width: 0%"></div>
                                </div>
                                <span id="deck1TotalTime">00:00</span>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <canvas id="waveform1" class="w-full h-24 bg-[#222] rounded"></canvas>
                        </div>
                        
                        <div class="flex gap-6">
                            <div class="flex flex-col items-center">
                                <span class="control-label">Turntable Control</span>
                                <div class="turntable-container relative">
                                    <div id="turntable3d1" class="turntable3d-container"></div>
                                    <div class="vinyl tooltip" id="vinyl1" onmousedown="startScratch(0, event)" 
                                         onmousemove="scratch(0, event)" onmouseup="stopScratch(0)">
                                        <div class="vinyl-texture"></div>
                                        <div class="vinyl-reflection"></div>
                                        <div class="vinyl-label" style="background-color: var(--primary); font-weight: bold; font-size: 0.7rem;">KIRK RADIO</div>
                                        <span class="tooltip-text">Click and drag to scratch</span>
                                    </div>
                                </div>
                                <div class="transport-controls mt-4">
                                    <button onclick="playDeck(0)" class="transport-button tooltip" id="playBtn1">
                                        <i class="fas fa-play" id="playIcon1"></i>
                                        <span class="tooltip-text">Play/Pause Track</span>
                                    </button>
                                    <button onclick="cuePoint(0)" class="transport-button tooltip">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span class="tooltip-text">Set/Jump to Cue Point</span>
                                    </button>
                                    <button onclick="resetDeck(0)" class="transport-button tooltip">
                                        <i class="fas fa-step-backward"></i>
                                        <span class="tooltip-text">Reset to Beginning</span>
                                    </button>
                                </div>
                            </div>
                            <div class="flex flex-col justify-between flex-1">
                                <div>
                                    <span class="control-label">Tempo</span>
                                    <div class="flex items-center">
                                        <button onclick="decreaseTempo(0)" class="dj-button-small">-</button>
                                        <input type="range" min="-10" max="10" value="0" class="slider flex-1 mx-2" id="tempo1"
                                               oninput="setTempo(0, this.value)">
                                        <button onclick="increaseTempo(0)" class="dj-button-small">+</button>
                                        <span class="ml-2 text-white" id="tempo1Value">0%</span>
                                    </div>
                                </div>
                                <div>
                                    <span class="control-label">EQ Controls</span>
                                    <div class="flex space-x-3">
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">LOW</span>
                                            <input type="range" min="-12" max="12" value="0" class="slider-vertical h-24" id="eqLow1"
                                                   oninput="setEQ(0, 'low', this.value)">
                                        </div>
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">MID</span>
                                            <input type="range" min="-12" max="12" value="0" class="slider-vertical h-24" id="eqMid1"
                                                   oninput="setEQ(0, 'mid', this.value)">
                                        </div>
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">HIGH</span>
                                            <input type="range" min="-12" max="12" value="0" class="slider-vertical h-24" id="eqHigh1"
                                                   oninput="setEQ(0, 'high', this.value)">
                                        </div>
                                        <div class="flex-1"></div>
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">GAIN</span>
                                            <input type="range" min="-12" max="12" value="0" class="slider-vertical h-24" id="gain1"
                                                   oninput="setGain(0, this.value)">
                                        </div>
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">VOL</span>
                                            <input type="range" min="0" max="100" value="80" class="slider-vertical h-24" id="volume1"
                                                   oninput="setVolume(0, this.value)">
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <span class="control-label">Effects</span>
                                    <div class="flex space-x-2">
                                        <button onclick="toggleEffect(0, 'filter')" class="effect-button tooltip" id="filterBtn1">
                                            <i class="fas fa-filter"></i>
                                            <span class="tooltip-text">Toggle Filter Effect</span>
                                        </button>
                                        <button onclick="toggleEffect(0, 'delay')" class="effect-button tooltip" id="delayBtn1">
                                            <i class="fas fa-exchange-alt"></i>
                                            <span class="tooltip-text">Toggle Delay Effect</span>
                                        </button>
                                        <button onclick="toggleEffect(0, 'reverb')" class="effect-button tooltip" id="reverbBtn1">
                                            <i class="fas fa-water"></i>
                                            <span class="tooltip-text">Toggle Reverb Effect</span>
                                        </button>
                                        <button onclick="toggleEffect(0, 'flanger')" class="effect-button tooltip" id="flangerBtn1">
                                            <i class="fas fa-wave-square"></i>
                                            <span class="tooltip-text">Toggle Flanger Effect</span>
                                        </button>
                                        <div class="flex-1"></div>
                                        <input type="range" min="0" max="100" value="50" class="slider w-24" id="effectAmount1"
                                               oninput="setEffectAmount(0, this.value)">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Deck 2 -->
                    <div class="deck p-6">
                        <div class="flex justify-between mb-4">
                            <h2 class="text-xl font-medium">Deck 2</h2>
                            <div class="flex space-x-2">
                                <button onclick="toggleSync(1)" class="dj-button tooltip" id="syncBtn2">
                                    <i class="fas fa-sync"></i>
                                    <span class="tooltip-text">Sync Tempo with Master</span>
                                </button>
                                <button onclick="toggleKeyLock(1)" class="dj-button tooltip" id="keyLockBtn2">
                                    <i class="fas fa-key"></i>
                                    <span class="tooltip-text">Lock Key When Changing Tempo</span>
                                </button>
                                <button onclick="toggleLoop(1)" class="dj-button tooltip" id="loopBtn2">
                                    <i class="fas fa-redo"></i>
                                    <span class="tooltip-text">Loop Current Section</span>
                                </button>
                            </div>
                        </div>
                        <div class="track-info p-2 mb-4">
                            <div id="deck2Title" class="font-medium truncate">No track loaded</div>
                            <div id="deck2Artist" class="text-sm text-gray-400 truncate">--</div>
                            <div class="flex justify-between items-center mt-2 text-xs text-gray-500">
                                <span id="deck2CurrentTime">00:00</span>
                                <div class="progress-bar flex-1 mx-2">
                                    <div id="deck2Progress" class="progress-bar-fill" style="width: 0%"></div>
                                </div>
                                <span id="deck2TotalTime">00:00</span>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <canvas id="waveform2" class="w-full h-24 bg-[#222] rounded"></canvas>
                        </div>
                        
                        <div class="flex gap-6">
                            <div class="flex flex-col items-center">
                                <span class="control-label">Turntable Control</span>
                                <div class="turntable-container relative">
                                    <div id="turntable3d2" class="turntable3d-container"></div>
                                    <div class="vinyl tooltip" id="vinyl2" onmousedown="startScratch(1, event)" 
                                         onmousemove="scratch(1, event)" onmouseup="stopScratch(1)">
                                        <div class="vinyl-texture"></div>
                                        <div class="vinyl-reflection"></div>
                                        <div class="vinyl-label" style="background-color: var(--primary); font-weight: bold; font-size: 0.7rem;">KIRK RADIO</div>
                                        <span class="tooltip-text">Click and drag to scratch</span>
                                    </div>
                                </div>
                                <div class="transport-controls mt-4">
                                    <button onclick="playDeck(1)" class="transport-button tooltip" id="playBtn2">
                                        <i class="fas fa-play" id="playIcon2"></i>
                                        <span class="tooltip-text">Play/Pause Track</span>
                                    </button>
                                    <button onclick="cuePoint(1)" class="transport-button tooltip">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span class="tooltip-text">Set/Jump to Cue Point</span>
                                    </button>
                                    <button onclick="resetDeck(1)" class="transport-button tooltip">
                                        <i class="fas fa-step-backward"></i>
                                        <span class="tooltip-text">Reset to Beginning</span>
                                    </button>
                                </div>
                            </div>
                            <div class="flex flex-col justify-between flex-1">
                                <div>
                                    <span class="control-label">Tempo</span>
                                    <div class="flex items-center">
                                        <button onclick="decreaseTempo(1)" class="dj-button-small">-</button>
                                        <input type="range" min="-10" max="10" value="0" class="slider flex-1 mx-2" id="tempo2"
                                               oninput="setTempo(1, this.value)">
                                        <button onclick="increaseTempo(1)" class="dj-button-small">+</button>
                                        <span class="ml-2 text-white" id="tempo2Value">0%</span>
                                    </div>
                                </div>
                                <div>
                                    <span class="control-label">EQ Controls</span>
                                    <div class="flex space-x-3">
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">LOW</span>
                                            <input type="range" min="-12" max="12" value="0" class="slider-vertical h-24" id="eqLow2"
                                                   oninput="setEQ(1, 'low', this.value)">
                                        </div>
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">MID</span>
                                            <input type="range" min="-12" max="12" value="0" class="slider-vertical h-24" id="eqMid2"
                                                   oninput="setEQ(1, 'mid', this.value)">
                                        </div>
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">HIGH</span>
                                            <input type="range" min="-12" max="12" value="0" class="slider-vertical h-24" id="eqHigh2"
                                                   oninput="setEQ(1, 'high', this.value)">
                                        </div>
                                        <div class="flex-1"></div>
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">GAIN</span>
                                            <input type="range" min="-12" max="12" value="0" class="slider-vertical h-24" id="gain2"
                                                   oninput="setGain(1, this.value)">
                                        </div>
                                        <div class="eq-control">
                                            <span class="text-xs text-center block">VOL</span>
                                            <input type="range" min="0" max="100" value="80" class="slider-vertical h-24" id="volume2"
                                                   oninput="setVolume(1, this.value)">
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <span class="control-label">Effects</span>
                                    <div class="flex space-x-2">
                                        <button onclick="toggleEffect(1, 'filter')" class="effect-button tooltip" id="filterBtn2">
                                            <i class="fas fa-filter"></i>
                                            <span class="tooltip-text">Toggle Filter Effect</span>
                                        </button>
                                        <button onclick="toggleEffect(1, 'delay')" class="effect-button tooltip" id="delayBtn2">
                                            <i class="fas fa-exchange-alt"></i>
                                            <span class="tooltip-text">Toggle Delay Effect</span>
                                        </button>
                                        <button onclick="toggleEffect(1, 'reverb')" class="effect-button tooltip" id="reverbBtn2">
                                            <i class="fas fa-water"></i>
                                            <span class="tooltip-text">Toggle Reverb Effect</span>
                                        </button>
                                        <button onclick="toggleEffect(1, 'flanger')" class="effect-button tooltip" id="flangerBtn2">
                                            <i class="fas fa-wave-square"></i>
                                            <span class="tooltip-text">Toggle Flanger Effect</span>
                                        </button>
                                        <div class="flex-1"></div>
                                        <input type="range" min="0" max="100" value="50" class="slider w-24" id="effectAmount2"
                                               oninput="setEffectAmount(1, this.value)">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mixer Section -->
                <div class="mixer-section p-6">
                    <h2 class="text-xl font-medium mb-4">Mixer</h2>
                    <div class="flex items-center justify-center">
                        <div class="flex flex-col items-center mx-6">
                            <span class="control-label">Crossfader</span>
                            <input type="range" min="0" max="100" value="50" class="slider w-64" id="crossfader"
                                   oninput="setCrossfader(this.value)">
                            <div class="flex w-full justify-between text-xs text-gray-500 mt-1">
                                <span>DECK 1</span>
                                <span>DECK 2</span>
                            </div>
                        </div>
                        <div class="flex flex-col items-center mx-6">
                            <span class="control-label">Headphone Cue</span>
                            <div class="flex space-x-4 mt-2">
                                <button onclick="toggleHeadphoneCue(0)" class="dj-button tooltip" id="headphoneCue1">
                                    <i class="fas fa-headphones"></i> 1
                                    <span class="tooltip-text">Toggle Headphone Cue for Deck 1</span>
                                </button>
                                <button onclick="toggleHeadphoneCue(1)" class="dj-button tooltip" id="headphoneCue2">
                                    <i class="fas fa-headphones"></i> 2
                                    <span class="tooltip-text">Toggle Headphone Cue for Deck 2</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bottom Status Bar -->
            <div class="bg-[#1a1a1a] border-t border-[#333] p-3 flex justify-between items-center text-sm">
                <div>
                    <span>Kirk Radio DJ v1.0</span>
                </div>
                <div class="flex items-center">
                    <span id="cpuUsage" class="mr-4">CPU: 0%</span>
                    <span id="memoryUsage" class="mr-4">MEM: 0MB</span>
                    <span id="audioStatus" class="mr-4">
                        <i class="fas fa-volume-up text-green-500 mr-1"></i> Audio System: Active
                    </span>
                    <span id="recordingStatus">
                        <i class="fas fa-circle text-gray-500 mr-1"></i> Not Recording
                    </span>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="fileInput" accept="audio/*" style="display: none;" multiple>
    
    <script src="js/app.js"></script>
    <script src="js/turntable.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/library.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/premium.js"></script>
    <script src="js/ui.js"></script>
    
    <!-- Premium Modal -->
    <div id="premiumModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-[#1a1a1a] rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b border-[#333]">
                <h2 class="text-2xl font-bold flex items-center">
                    <i class="fas fa-crown text-yellow-300 mr-3"></i> Kirk Radio DJ Premium
                </h2>
                <button onclick="premiumFeatures.hidePricingModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6">
                <p class="mb-6 text-gray-300">Upgrade to Premium to unlock advanced features and enhance your DJ experience.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- Monthly Plan -->
                    <div class="bg-[#222] rounded-lg p-6 border border-[#333] hover:border-blue-500 transition-colors">
                        <div class="text-center mb-4">
                            <h3 class="text-xl font-bold mb-2">Monthly</h3>
                            <div class="text-3xl font-bold text-white">$9.99<span class="text-lg text-gray-400">/month</span></div>
                            <p class="text-gray-400 mt-2">Billed monthly</p>
                        </div>
                        <ul class="space-y-3 mb-6">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                All Premium Features
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                High-Quality Recording (320kbps)
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                Advanced Effects Pack
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                Cloud Storage Integration
                            </li>
                        </ul>
                        <button id="monthlyPlanBtn" class="w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-colors">
                            Choose Monthly
                        </button>
                    </div>
                    
                    <!-- Annual Plan -->
                    <div class="bg-[#222] rounded-lg p-6 border border-blue-500 relative">
                        <div class="absolute -top-3 right-3">
                            <span class="bg-blue-600 text-white text-xs px-3 py-1 rounded-full font-medium">BEST VALUE</span>
                        </div>
                        <div class="text-center mb-4">
                            <h3 class="text-xl font-bold mb-2">Annual</h3>
                            <div class="text-3xl font-bold text-white">$89.99<span class="text-lg text-gray-400">/year</span></div>
                            <p class="text-green-500 mt-2">Save $30 (25% off)</p>
                        </div>
                        <ul class="space-y-3 mb-6">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                All Premium Features
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                High-Quality Recording (320kbps)
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                Advanced Effects Pack
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                Cloud Storage Integration
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <strong>Custom Vinyl Skins</strong>
                            </li>
                        </ul>
                        <button id="annualPlanBtn" class="w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-colors">
                            Choose Annual
                        </button>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-medium mb-3">Premium Features Include:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="flex items-start">
                            <i class="fas fa-sliders-h text-blue-500 mt-1 mr-3"></i>
                            <div>
                                <h5 class="font-medium">Advanced Effects</h5>
                                <p class="text-sm text-gray-400">Access professional-grade effects and transitions</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-hdd text-blue-500 mt-1 mr-3"></i>
                            <div>
                                <h5 class="font-medium">High-Quality Recording</h5>
                                <p class="text-sm text-gray-400">Record at 320kbps studio quality</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-cloud-upload-alt text-blue-500 mt-1 mr-3"></i>
                            
</body>
</html>
